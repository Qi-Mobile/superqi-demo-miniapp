<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Sample Miniapp - Video Player</title>
    <script src="/common/main.js"></script>
    <script src="https://cdn.marmot-cloud.com/npm/hylid-bridge/2.10.0/index.js"></script>
    <link rel="stylesheet" href="/common/style.css">
    <style>
        .video-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
        }
        
        
        .video-info {
            background: #f5f5f5;
            padding: 12px;
            border-radius: 8px;
            margin: 16px 0;
            font-size: 14px;
        }
        
        .video-info h4 {
            margin: 0 0 8px 0;
            color: #333;
        }
        
        .video-info p {
            margin: 4px 0;
            color: #666;
        }
    </style>
</head>

<body>
    <div class="flex flex-col w-full h-full min-h-full">
        <miniapp-header></miniapp-header>

        <div class="flex flex-col gap-2 mb-4 px-4">
            <h2 class="text-2xl font-bold mb-4">Video Player Demo</h2>
            
            <div class="video-container">
                <video 
                    id="myVideo"
                    src="https://www.w3schools.com/html/mov_bbb.mp4"
                    poster="https://via.placeholder.com/600x300/333333/FFFFFF?text=Video+Poster"
                    poster-size="contain"
                    initial-time="0"
                    autoplay="true"
                    direction="0"
                    muted="true"
                    style="width: 100%; height: 300px; background: #000;"
                ></video>
            </div>

            <div class="video-info">
                <h4>Video Configuration:</h4>
                <p><strong>Source:</strong> W3Schools sample video (MP4)</p>
                <p><strong>Poster:</strong> Placeholder image</p>
                <p><strong>Format:</strong> MP4 (H.264 encoding)</p>
                <p><strong>Autoplay:</strong> Enabled</p>
                <p><strong>Loop:</strong> Disabled</p>
            </div>
        </div>

        <section id="content" class="flex-1 mt-4 flex flex-col items-start p-4">
            <miniapp-console class="w-full h-full"></miniapp-console>
        </section>
    </div>
</body>

<script>
    const data = {
        video: {
            src: 'https://www.w3schools.com/html/mov_bbb.mp4',
            poster: 'https://via.placeholder.com/600x300/333333/FFFFFF?text=Video+Poster',
            posterSize: 'contain',
            isLooping: false,
            muteWhenPlaying: false,
            initTime: 0,
            autoplay: false,
            directionWhenFullScreen: 0
        }
    };



    function onPlay(e) {
        console.log('video: onPlay', JSON.stringify(e));
    }

    function onPause(e) {
        console.log('video: onPause', JSON.stringify(e));
    }

    function onEnded(e) {
        console.log('video: onEnded', JSON.stringify(e));
    }

    function onError(e) {
        console.log('video: onPlayError, e=' + JSON.stringify(e));
    }

    function onRenderStart(e) {
        console.log('video: onRenderStart', JSON.stringify(e));
    }

    function onUserAction(e) {
        console.log('video: onUserAction: ' + JSON.stringify(e));
    }

    function onTap(e) {
        console.log('video: onTap: ' + JSON.stringify(e));
    }

    function onFullScreenChange(e) {
        console.log('video: onFullScreenChange: ' + JSON.stringify(e));
    }

    function onLoading(e) {
        console.log('video: onLoading: ' + JSON.stringify(e));
    }

    window.onload = () => {
        console.log('Video player page loaded');
    };

    document.addEventListener('DOMContentLoaded', () => {
        const videoElement = document.getElementById('myVideo');
        if (videoElement) {
            videoElement.addEventListener('play', onPlay);
            videoElement.addEventListener('pause', onPause);
            videoElement.addEventListener('ended', onEnded);
            videoElement.addEventListener('error', onError);
            videoElement.addEventListener('loadstart', onRenderStart);
            videoElement.addEventListener('timeupdate', (e) => {
            });
            videoElement.addEventListener('click', onTap);
            videoElement.addEventListener('fullscreenchange', onFullScreenChange);
            videoElement.addEventListener('loadstart', onLoading);
        }
    });
</script>

</html>